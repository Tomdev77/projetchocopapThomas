{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\CALVESI\\\\OneDrive\\\\Bureau\\\\ProjectThomasChocoPap\\\\src\\\\store\\\\panier-context.jsx\",\n  _s = $RefreshSig$();\nimport { createContext, useReducer, useEffect } from \"react\";\nimport chocolats from \"../store/data.json\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const PanierContext = /*#__PURE__*/createContext({\n  items: [],\n  addItemToCart: () => {},\n  updateItemsquantity: () => {},\n  resetItems: () => {},\n  removeItemFromCart: () => {},\n  totalProduct: 0\n});\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    case \"AJOUTER_DANS_PANIER\":\n      const existingItem = state.items.find(item => item.id === action.payload.productId);\n      const updatedItems = [...state.items];\n      if (existingItem) {\n        const index = updatedItems.findIndex(item => item.id === action.payload.productId);\n        updatedItems[index].quantity += 1;\n      } else {\n        const product = chocolats.chocolats.find(p => p.id === action.payload.productId);\n        if (product) {\n          updatedItems.push({\n            id: product.id,\n            title: product.title,\n            price: product.price,\n            quantity: 1\n          });\n        }\n      }\n      return {\n        ...state,\n        items: updatedItems\n      };\n    case \"RETIRER_DU_PANIER\":\n      const filteredItems = state.items.filter(item => item.id !== action.payload.productId);\n      return {\n        ...state,\n        items: filteredItems\n      };\n    case \"ACTUALISER_QUANTITE_PRODUIT\":\n      const {\n        productId,\n        quantity\n      } = action.payload;\n      const itemToUpdate = state.items.find(item => item.id === productId);\n      if (itemToUpdate) {\n        const index = state.items.findIndex(item => item.id === productId);\n        const updatedQuantity = itemToUpdate.quantity + quantity;\n        const newItems = [...state.items];\n        if (updatedQuantity <= 0) {\n          newItems.splice(index, 1);\n        } else {\n          newItems[index].quantity = updatedQuantity;\n        }\n        return {\n          ...state,\n          items: newItems\n        };\n      }\n      return state;\n    case \"RESET_ITEMS\":\n      return {\n        ...state,\n        items: []\n      };\n    case \"SET_TOTAL_PRODUCT\":\n      return {\n        ...state,\n        totalProduct: action.payload\n      };\n    default:\n      return state;\n  }\n};\nexport const PanierContextProvider = ({\n  children\n}) => {\n  _s();\n  const [cartState, cartDispatch] = useReducer(cartReducer, {\n    items: [],\n    totalProduct: 0\n  });\n  const resetItems = () => {\n    cartDispatch({\n      type: \"RESET_ITEMS\"\n    });\n  };\n  const handleProductToCart = productId => {\n    cartDispatch({\n      type: \"AJOUTER_DANS_PANIER\",\n      payload: {\n        productId\n      }\n    });\n  };\n  const handleRemoveFromCart = productId => {\n    cartDispatch({\n      type: \"RETIRER_DU_PANIER\",\n      payload: {\n        productId\n      }\n    });\n  };\n  const handleUpdateProductQuantity = (productId, quantity) => {\n    cartDispatch({\n      type: \"ACTUALISER_QUANTITE_PRODUIT\",\n      payload: {\n        productId,\n        quantity\n      }\n    });\n  };\n  useEffect(() => {\n    const totalProduct = cartState.items.reduce((acc, item) => acc + item.quantity, 0);\n    cartDispatch({\n      type: \"SET_TOTAL_PRODUCT\",\n      payload: totalProduct\n    });\n  }, [cartState.items]);\n  const initialValue = {\n    items: cartState.items,\n    addItemToCart: handleProductToCart,\n    removeItemFromCart: handleRemoveFromCart,\n    updateItemsquantity: handleUpdateProductQuantity,\n    resetItems: resetItems,\n    totalProduct: cartState.totalProduct\n  };\n  return /*#__PURE__*/_jsxDEV(PanierContext.Provider, {\n    value: initialValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 5\n  }, this);\n};\n_s(PanierContextProvider, \"dlZA5Ch1D2ZZbsP5pbVMScaPWws=\");\n_c = PanierContextProvider;\nexport default PanierContext;\nvar _c;\n$RefreshReg$(_c, \"PanierContextProvider\");","map":{"version":3,"names":["createContext","useReducer","useEffect","chocolats","jsxDEV","_jsxDEV","PanierContext","items","addItemToCart","updateItemsquantity","resetItems","removeItemFromCart","totalProduct","cartReducer","state","action","type","existingItem","find","item","id","payload","productId","updatedItems","index","findIndex","quantity","product","p","push","title","price","filteredItems","filter","itemToUpdate","updatedQuantity","newItems","splice","PanierContextProvider","children","_s","cartState","cartDispatch","handleProductToCart","handleRemoveFromCart","handleUpdateProductQuantity","reduce","acc","initialValue","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/CALVESI/OneDrive/Bureau/ProjectThomasChocoPap/src/store/panier-context.jsx"],"sourcesContent":["import { createContext, useReducer, useEffect } from \"react\";\r\nimport chocolats from \"../store/data.json\";\r\n\r\nexport const PanierContext = createContext({\r\n  items: [],\r\n  addItemToCart: () => {},\r\n  updateItemsquantity: () => {},\r\n  resetItems: () => {},\r\n  removeItemFromCart: () => {},\r\n  totalProduct: 0,\r\n});\r\n\r\nconst cartReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"AJOUTER_DANS_PANIER\":\r\n      const existingItem = state.items.find(\r\n        (item) => item.id === action.payload.productId\r\n      );\r\n      const updatedItems = [...state.items];\r\n\r\n      if (existingItem) {\r\n        const index = updatedItems.findIndex(\r\n          (item) => item.id === action.payload.productId\r\n        );\r\n        updatedItems[index].quantity += 1;\r\n      } else {\r\n        const product = chocolats.chocolats.find(\r\n          (p) => p.id === action.payload.productId\r\n        );\r\n        if (product) {\r\n          updatedItems.push({\r\n            id: product.id,\r\n            title: product.title,\r\n            price: product.price,\r\n            quantity: 1,\r\n          });\r\n        }\r\n      }\r\n      return { ...state, items: updatedItems };\r\n\r\n    case \"RETIRER_DU_PANIER\":\r\n      const filteredItems = state.items.filter(\r\n        (item) => item.id !== action.payload.productId\r\n      );\r\n      return { ...state, items: filteredItems };\r\n\r\n    case \"ACTUALISER_QUANTITE_PRODUIT\":\r\n      const { productId, quantity } = action.payload;\r\n      const itemToUpdate = state.items.find((item) => item.id === productId);\r\n\r\n      if (itemToUpdate) {\r\n        const index = state.items.findIndex((item) => item.id === productId);\r\n        const updatedQuantity = itemToUpdate.quantity + quantity;\r\n\r\n        const newItems = [...state.items];\r\n        if (updatedQuantity <= 0) {\r\n          newItems.splice(index, 1);\r\n        } else {\r\n          newItems[index].quantity = updatedQuantity;\r\n        }\r\n        return { ...state, items: newItems };\r\n      }\r\n      return state;\r\n\r\n    case \"RESET_ITEMS\":\r\n      return { ...state, items: [] };\r\n\r\n    case \"SET_TOTAL_PRODUCT\":\r\n      return { ...state, totalProduct: action.payload };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const PanierContextProvider = ({ children }) => {\r\n  const [cartState, cartDispatch] = useReducer(cartReducer, {\r\n    items: [],\r\n    totalProduct: 0,\r\n  });\r\n\r\n  const resetItems = () => {\r\n    cartDispatch({\r\n      type: \"RESET_ITEMS\",\r\n    });\r\n  };\r\n\r\n  const handleProductToCart = (productId) => {\r\n    cartDispatch({\r\n      type: \"AJOUTER_DANS_PANIER\",\r\n      payload: { productId },\r\n    });\r\n  };\r\n\r\n  const handleRemoveFromCart = (productId) => {\r\n    cartDispatch({\r\n      type: \"RETIRER_DU_PANIER\",\r\n      payload: { productId },\r\n    });\r\n  };\r\n\r\n  const handleUpdateProductQuantity = (productId, quantity) => {\r\n    cartDispatch({\r\n      type: \"ACTUALISER_QUANTITE_PRODUIT\",\r\n      payload: {\r\n        productId,\r\n        quantity,\r\n      },\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const totalProduct = cartState.items.reduce(\r\n      (acc, item) => acc + item.quantity,\r\n      0\r\n    );\r\n\r\n    cartDispatch({\r\n      type: \"SET_TOTAL_PRODUCT\",\r\n      payload: totalProduct,\r\n    });\r\n  }, [cartState.items]);\r\n\r\n  const initialValue = {\r\n    items: cartState.items,\r\n    addItemToCart: handleProductToCart,\r\n    removeItemFromCart: handleRemoveFromCart,\r\n    updateItemsquantity: handleUpdateProductQuantity,\r\n    resetItems: resetItems,\r\n    totalProduct: cartState.totalProduct,\r\n  };\r\n\r\n  return (\r\n    <PanierContext.Provider value={initialValue}>\r\n      {children}\r\n    </PanierContext.Provider>\r\n  );\r\n};\r\n\r\nexport default PanierContext;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}